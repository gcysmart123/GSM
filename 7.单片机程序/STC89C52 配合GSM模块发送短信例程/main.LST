C51 COMPILER V7.00  MAIN                                                                   06/05/2013 14:41:15 PAGE 1   


C51 COMPILER V7.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c ROM(COMPACT) BROWSE DEBUG OBJECTEXTEND TABS(2)

stmt level    source

   1          #include"reg52.h"
   2          #include "1602.h"
   3          #include "uart.c"
   4          #include "tc35.c"
   5          
   6          //#define RsBuf_N     50
   7          
   8          //char RsBuf[RsBuf_N];  //定义串口接收数据缓冲区
   9          //uchar RsPoint=0;
  10          
  11          sbit MQ2=P2^7;
  12          sbit HUOYAN=P2^3;
  13          sbit HONGWAI=P2^0;
  14          
  15          sbit huang=P2^6;
  16          sbit hong=P2^5;
  17          sbit lv=P2^4;
  18          sbit buzz=P2^2;
  19          sbit jk=P2^1;
  20          
  21          uchar code PhoneNO[]= "+8618011461069";
  22          uchar code Text1[]= "Harmfulgases";
  23          uchar code Text2[]= "Fire";
  24          uchar code Text3[]= "Theft";
  25          
  26          uchar code center[]="+8613800451500";
  27          
  28          void main()
  29          {
  30   1        jk=0;
  31   1      //  TC35_init();
  32   1        Uart_init();
  33   1        init_1602();
  34   1        
  35   1        Send_AT();
  36   1        
  37   1      
  38   1        Set_MODE(1);     //设置短消息模式                                 
  39   1        Set_CENTER(center);  // 设置短消息中心     AT+CSCA=“+8613800531500”回车
  40   1      
  41   1      
  42   1        
  43   1        
  44   1        while(1)
  45   1        {
  46   2          if(MQ2==0)
  47   2          {
  48   3            lv=0;
  49   3            buzz=0;
  50   3      
  51   3            TransmitText(PhoneNO,Text1);
  52   3            
  53   3            jk=1; 
  54   3            while(1);
  55   3          }
C51 COMPILER V7.00  MAIN                                                                   06/05/2013 14:41:15 PAGE 2   

  56   2          if(HUOYAN==0)
  57   2          {
  58   3            huang=0;
  59   3            buzz=0;
  60   3      
  61   3            TransmitText(PhoneNO,Text2);  
  62   3            jk=1;
  63   3            while(1);
  64   3          }
  65   2          if(HONGWAI==0)
  66   2          {
  67   3            hong=0;
  68   3            buzz=0;
  69   3            TransmitText(PhoneNO,Text3);  
  70   3            while(1);
  71   3          }
  72   2        }
  73   1      
  74   1          //lcd_disp_str(RsBuf ,2);
  75   1          
  76   1      
  77   1       }
  78          
  79           
  80           
  81          
  82          
  83           /*问题：
  84             每次处理完数据。RsPoint是怎样清零的？？？？？在 准备发一个数据，然后接受一个数据 之前
  85             RsBuf[RsPoint++]=SBUF;
  86              RsBuf[RsPoint]=0x00;   //将下一个数据清零
  87          
  88              如果这个发送没问题。加删除，接收函数，参考桌面上的tc35.c
  89          
  90              添加液晶菜单的支持  ，类似手机
  91          */
  92           


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    965    ----
   CONSTANT SIZE    =    303    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     51      33
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
